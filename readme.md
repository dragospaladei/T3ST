# T3ST â€“ Simulation Framework

T3ST is a simulation framework with a GUI-driven parameter setup, Fortran-based execution, and optional post-processing using Mathematica. This document describes the required folder structure and the recommended workflow.

---

## ðŸ“ Directory Structure

T3ST expects the following directory layout:

```
Parent_Folder/
â”œâ”€â”€ config/                         # GUI configuration files
â”‚   â”œâ”€â”€ parameters.yaml
â”‚   â””â”€â”€ scenarios.yaml
â”‚
â”œâ”€â”€ data/                           # Simulation output data
â”‚   â”œâ”€â”€ Sim_01/
â”‚   â”‚   â”œâ”€â”€ Run_00001/
â”‚   â”‚   â”œâ”€â”€ Run_00002/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ Sim_02/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ G_EDSQK/                        # Optional: magnetic equilibrium data
â”‚   â”œâ”€â”€ Documentation/             # Reference material
â”‚   â”œâ”€â”€ MAST-U/                     # MAST-U discharges
â”‚   â”œâ”€â”€ TCV/                        # TCV discharges
â”‚   â””â”€â”€ WEST/                       # WEST discharges
â”‚
â”œâ”€â”€ Mathematic/                    # Optional but recommended
â”‚   â””â”€â”€ Process_data.nb             # Mathematica notebook for data processing & visualization
â”‚
â”œâ”€â”€ Sims/                           # Simulation parameter files (generated by GUI)
â”‚   â”œâ”€â”€ Sim_01.dat
â”‚   â”œâ”€â”€ Sim_02.dat
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ Source/                         # Fortran source code
â”‚   â”œâ”€â”€ compile
â”‚   â”œâ”€â”€ set_ifx
â”‚   â”œâ”€â”€ run_all.sh
â”‚   â””â”€â”€ *.f90
â”‚
â””â”€â”€ T3ST_GUI.py                     # Graphical User Interface
```

### Notes
- A **Simulation** (`Sim_XX`) corresponds to a specific parameter scan.
- Each **Run** (`Run_000XX`) represents one discrete set of parameters.
- The `G_EDSQK` and `Mathematic` directories are optional but highly recommended.
- Python-based post-processing may be added in the future.

---

## â–¶ï¸ Workflow

### 1. Launch the GUI

From the **Parent_Folder**, run:

```bash
python3 T3ST_GUI.py
```

> On Windows, double-clicking the file also works.

---

### 2. Configure the Simulation (GUI)

In the GUI:

1. Select the **simulation number**
2. Choose a **scenario**
3. Manually adjust parameters if needed
4. Select:
   - The parameter to vary
   - Number of discrete values (number of runs)
   - Parameter interval (initial â†’ final)
5. Export the parameters

This generates the corresponding `Sim_XX.dat` file in the `Sims/` directory.

---

### 3. Compile and Run the Code

Navigate to the source directory:

```bash
cd Source
```

Then:

```bash
source set_ifx
source compile
```

or alternatively:

```bash
make
```

Run the executable:

```bash
./a.out
```

When prompted:
- Enter the **simulation number** (`noofsim`)

#### Batch / Meta-Simulations

To run multiple simulations automatically:

```bash
./run_all.sh
```

---

### 4. Data Output

Simulation results are written to:

```
Parent_Folder/data/Sim_<noofsim>/Run_000XX/
```

Each `Run_000XX` corresponds to one parameter set.

---

### 5. Post-Processing

Data processing and visualization can be performed using Mathematica:

- Open:
  ```
  Mathematic/Process_data.nb
  ```
- Point it to the desired `Sim_XX/Run_000XX` directory

---

## ðŸ§© Future Extensions

- Python-based data processing and visualization
- Additional equilibrium databases
- Expanded GUI automation

